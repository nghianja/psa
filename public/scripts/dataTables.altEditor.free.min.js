!function(o){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return o(t,window,document)}):"object"==typeof exports?module.exports=function(t,e){return t=t||window,e&&e.fn.dataTable||(e=require("datatables.net")(t,e).$),o(e,t,t.document)}:o(jQuery,window,document)}(function($,window,document,undefined){"use strict";var DataTable=$.fn.dataTable,_instance=0,altEditor=function(t,e){if(!DataTable.versionCheck||!DataTable.versionCheck("1.10.8"))throw"Warning: altEditor requires DataTables 1.10.8 or greater";this.c=$.extend(!0,{},DataTable.defaults.altEditor,altEditor.defaults,e),this.s={dt:new DataTable.Api(t),namespace:".altEditor"+_instance++},this.dom={modal:$('<div class="dt-altEditor-handle"/>')},this._constructor()};return $.extend(altEditor.prototype,{_constructor:function(){var t=this,e=this.s.dt;e.settings()[0].oInit.onAddRow&&(t.onAddRow=e.settings()[0].oInit.onAddRow),e.settings()[0].oInit.onDeleteRow&&(t.onDeleteRow=e.settings()[0].oInit.onDeleteRow),e.settings()[0].oInit.onEditRow&&(t.onEditRow=e.settings()[0].oInit.onEditRow),this._setup(),e.on("destroy.altEditor",function(){e.off(".altEditor"),$(e.table().body()).off(t.s.namespace),$(document.body).off(t.s.namespace)})},_setup:function(){var n=this,t=this.s.dt,e="altEditor-modal-"+(""+Math.random()).replace(".","");this.modal_selector="#"+e;var o='<div class="modal fade" id="'+e+'" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 style="padding-top: 1rem;padding-left: 1rem;" class="modal-title"></h4><button style="margin: initial;" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><p></p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><input type="submit" form="altEditor-form" class="btn btn-primary"></input></div></div></div></div>';$("body").append(o),t.button("edit:name")&&(t.button("edit:name").action(function(t,e,o,a){n._openEditModal()}),$(this.modal_selector).on("click","#editRowBtn",function(t){n._inputValidation()&&(t.preventDefault(),t.stopPropagation(),n._editRowData())})),t.button("delete:name")&&(t.button("delete:name").action(function(t,e,o,a){n._openDeleteModal()}),$(this.modal_selector).on("click","#deleteRowBtn",function(t){t.preventDefault(),t.stopPropagation(),n._deleteRow(),$(this).prop("disabled",!0)})),t.button("add:name")&&(t.button("add:name").action(function(t,e,o,a){n._openAddModal()}),$(this.modal_selector).on("click","#addRowBtn",function(t){n._inputValidation()&&(t.preventDefault(),t.stopPropagation(),n._addRowData())})),this.s.dt.button("refresh:name")&&this.s.dt.button("refresh:name").action(function(t,e,o,a){e.ajax&&e.ajax.url()&&e.ajax.reload()})},_emitEvent:function(o,a){this.s.dt.iterator("table",function(t,e){$(t.nTable).triggerHandler(o+".dt",a)})},_openEditModal:function(){var dt=this.s.dt,adata=dt.rows({selected:!0}),columnDefs=this.completeColumnDefs(),data=this.createDialog(columnDefs,"Edit Record","Edit","Close","editRowBtn"),selector=this.modal_selector;for(var j in columnDefs){var arrIndex="['"+columnDefs[j].name.toString().split(".").join("']['")+"']",selectedValue=eval("adata.data()[0]"+arrIndex),jquerySelector="#"+columnDefs[j].name.toString().replace(/\./g,"\\.");$(selector).find(jquerySelector).val(this._quoteattr(selectedValue)),$(selector).find(jquerySelector).trigger("change")}$(selector+" input[0]").focus(),$(selector).trigger("alteditor:some_dialog_opened").trigger("alteditor:edit_dialog_opened")},_editRowData:function(){var i=this,t=this.s.dt,e={};t.rows({selected:!0});$('form[name="altEditor-form"] *').filter(":input").each(function(t){e[$(this).attr("id")]=$(this).val()}),console.log(e),i.onEditRow(i,e,function(t,e,o,a,n){i._editRowCallback(t,e,o,a,n)},function(t){i._errorCallback(t)})},_openDeleteModal:function(){var t=this,e=this.s.dt.rows({selected:!0}),o=this.completeColumnDefs(),a="";for(var n in a+="<form name='altEditor-form' role='form'>",o)0<=o[n].type.indexOf("hidden")?a+="<input type='hidden' id='"+o[n].title+"' value='"+e.data()[0][o[n].name]+"'></input>":a+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><label for='"+t._quoteattr(o[n].name)+"'>"+o[n].title+":&nbsp</label> <input  type='hidden'  id='"+t._quoteattr(o[n].title)+"' name='"+t._quoteattr(o[n].title)+"' placeholder='"+t._quoteattr(o[n].title)+"' style='overflow:hidden'  class='form-control' value='"+t._quoteattr(e.data()[0][o[n].name])+"' >"+e.data()[0][o[n].name]+"</input></div>";a+="</form>";var i=this.modal_selector;$(i).on("show.bs.modal",function(){$(i).find(".modal-title").html("Delete Record"),$(i).find(".modal-body").html(a),$(i).find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button"  data-content="remove" class="btn btn-danger" id="deleteRowBtn">Delete</button>')}),$(i).modal("show"),$(i+" input[0]").focus(),$(i).trigger("alteditor:some_dialog_opened").trigger("alteditor:delete_dialog_opened")},_deleteRow:function(){for(var e=this,t=this.s.dt,o={},a=t.rows({selected:!0}),n=0;n<t.context[0].aoColumns.length;n++){var i=t.context[0].aoColumns[n].data?t.context[0].aoColumns[n].data:t.context[0].aoColumns[n].mData?t.context[0].aoColumns[n].mData:t.context[0].aoColumns[n].idx;o[i]=a.data()[0][i]}e.onDeleteRow(e,o,function(t){e._deleteRowCallback(t)},function(t){e._errorCallback(t)})},_openAddModal:function(){this.s.dt;var t=this.completeColumnDefs(),e=(this.createDialog(t,"Add Record","Add","Close","addRowBtn"),this.modal_selector);$(e+" input[0]").focus(),$(e).trigger("alteditor:some_dialog_opened").trigger("alteditor:add_dialog_opened")},completeColumnDefs:function(){var t=[],e=this.s.dt;for(var o in e.context[0].aoColumns){var a=e.context[0].aoColumns[o];t[o]={title:a.sTitle,name:a.data?a.data:a.mData,type:a.type?a.type:"text",options:a.options?a.options:[],readonly:!!a.readonly&&a.readonly,disabled:!!a.disabled&&a.disabled,msg:a.errorMsg?a.errorMsg:"",hoverMsg:a.hoverMsg?a.hoverMsg:"",pattern:a.pattern?a.pattern:".*",special:a.special?a.special:"",unique:!!a.unique&&a.unique,uniqueMsg:a.uniqueMsg?a.uniqueMsg:"",maxLength:!!a.maxLength&&a.maxLength,multiple:!!a.multiple&&a.multiple,select2:!!a.select2&&a.select2,datepicker:!!a.datepicker&&a.datepicker,datetimepicker:!!a.datetimepicker&&a.datetimepicker}}return t},createDialog:function(t,e,o,a,n){var i="";for(var d in i+="<form name='altEditor-form' role='form'>",t)if(0<=t[d].type.indexOf("hidden"))i+="<input type='hidden' id='"+t[d].name+"' ></input>";else{if(i+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'>",i+="<div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'>",i+="<label for='"+t[d].name+"'>"+t[d].title+":</label></div>",i+="<div class='col-sm-8 col-md-8 col-lg-8'>",0<=t[d].type.indexOf("readonly"))i+="<input type='text' readonly  id='"+this._quoteattr(t[d].name)+"' name='"+this._quoteattr(t[d].title)+"' placeholder='"+this._quoteattr(t[d].title)+"' style='overflow:hidden'  class='form-control  form-control-sm' value=''>";else if(0<=t[d].type.indexOf("select")){var l="";if(0<t[d].options.length)for(var r=0;r<t[d].options.length;r++)l+="<option value='"+this._quoteattr(t[d].options[r])+"'>"+t[d].options[r]+"</option>";else for(var s in t[d].options)l+="<option value='"+this._quoteattr(s)+"' >"+t[d].options[s]+"</option>";i+="<select class='form-control"+(t[d].select2?" select2":"")+"' id='"+this._quoteattr(t[d].name)+"' name='"+this._quoteattr(t[d].title)+"' "+(t[d].multiple?" multiple ":"")+(t[d].readonly?" readonly ":"")+(t[d].disabled?" disabled ":"")+">"+l+"</select>"}else i+="<input type='"+this._quoteattr(t[d].type)+"' id='"+this._quoteattr(t[d].name)+"' pattern='"+this._quoteattr(t[d].pattern)+"' title='"+this._quoteattr(t[d].hoverMsg)+"' name='"+this._quoteattr(t[d].title)+"' placeholder='"+this._quoteattr(t[d].title)+"' data-special='"+this._quoteattr(t[d].special)+"' data-errorMsg='"+this._quoteattr(t[d].msg)+"' data-uniqueMsg='"+this._quoteattr(t[d].uniqueMsg)+"' data-unique='"+t[d].unique+"' "+(t[d].readonly?" readonly ":"")+(t[d].disabled?" disabled ":"")+(0==t[d].maxLength?"":" maxlength='"+t[d].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value=''>",i+="<label id='"+this._quoteattr(t[d].name)+"label' class='errorLabel'></label>";i+="</div><div style='clear:both;'></div></div>"}i+="</form>";var c=this.modal_selector;for(var d in $(c).on("show.bs.modal",function(){var t='<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">'+a+'</button><button type="button"  data-content="remove" class="btn btn-primary" id="'+n+'">'+o+"</button>";$(c).find(".modal-title").html(e),$(c).find(".modal-body").html(i),$(c).find(".modal-footer").html(t)}),$(c).modal("show"),$(c+" input[0]").focus(),t)t[d].select2?$(c).find("select#"+t[d].name).select2(t[d].select2):t[d].datepicker?$(c).find("#"+t[d].name).datepicker(t[d].datepicker):t[d].datetimepicker&&$(c).find("#"+t[d].name).datetimepicker(t[d].datetimepicker)},_addRowData:function(){var e=this,o=(this.s.dt,{});$('form[name="altEditor-form"] *').filter(":input").each(function(t){o[$(this).attr("id")]=$(this).val()}),e.onAddRow(e,o,function(t){e._addRowCallback(t)},function(t){e._errorCallback(t)})},_deleteRowCallback:function(t,e,o){var a=this.modal_selector;$(a+" .modal-body .alert").remove();$(a+" .modal-body").append('<div class="alert alert-success" role="alert"><strong>Success!</strong></div>'),this.s.dt.row({selected:!0}).remove(),this.s.dt.draw(),$("div"+a).find("button#addRowBtn").prop("disabled",!0),$("div"+a).find("button#editRowBtn").prop("disabled",!0),$("div"+a).find("button#deleteRowBtn").prop("disabled",!0)},_addRowCallback:function(t,e,o){var a="string"==typeof t?JSON.parse(t):t,n=this.modal_selector;$(n+" .modal-body .alert").remove();$(n+" .modal-body").append('<div class="alert alert-success" role="alert"><strong>Success!</strong></div>'),this.s.dt.row.add(a).draw(!1),$("div"+n).find("button#addRowBtn").prop("disabled",!0),$("div"+n).find("button#editRowBtn").prop("disabled",!0),$("div"+n).find("button#deleteRowBtn").prop("disabled",!0)},_editRowCallback:function(t,e,o){var a="string"==typeof t?JSON.parse(t):t,n=this.modal_selector;$(n+" .modal-body .alert").remove();$(n+" .modal-body").append('<div class="alert alert-success" role="alert"><strong>Success!</strong></div>'),this.s.dt.row({selected:!0}).data(a),this.s.dt.draw(),$("div"+n).find("button#addRowBtn").prop("disabled",!0),$("div"+n).find("button#editRowBtn").prop("disabled",!0),$("div"+n).find("button#deleteRowBtn").prop("disabled",!0)},_errorCallback:function(t,e,o){var a=t,n=this.modal_selector;$(n+" .modal-body .alert").remove();var i="There was an unknown error!";if(a.responseJSON&&a.responseJSON.errors)for(var d in i="",a.responseJSON.errors)i+=a.responseJSON.errors[d][0];var l='<div class="alert alert-danger" role="alert"><strong>Error!</strong> '+(null==a.status?"":"Response code: "+a.status)+" "+i+"</div>";$(n+" .modal-body").append(l)},onAddRow:function(t,e,o,a){console.log("Missing AJAX configuration for INSERT"),o(e)},onEditRow:function(t,e,o,a){console.log("Missing AJAX configuration for UPDATE"),o(e)},onDeleteRow:function(t,e,o,a){console.log("Missing AJAX configuration for DELETE"),o(e)},_inputValidation:function(){var i=this.s.dt,t=!1,d=0;return $('form[name="altEditor-form"] *').filter(":text").each(function(t){var e="#"+$(this).attr("id")+"label";if($(e).hide(),$(e).empty(),$(this).val().match($(this).attr("pattern"))){if("true"==$(this).attr("data-unique")){var o=i.column("th:contains('"+$(this).attr("name")+"')").data(),a=null;for(var n in null!=i.row({selected:!0}).index()&&(a=i.cell(i.row({selected:!0}).index(),i.column("th:contains('"+$(this).attr("name")+"')").index()).data()),o)$(this).val()==o[n]&&o[n]!=a&&($(e).html($(this).attr("data-uniqueMsg")),$(e).show(),d++)}}else $(e).html($(this).attr("data-errorMsg")),$(e).show(),d++}),0==d&&(t=!0),t},_quoteattr:function(t,e){if(null==t)return"";if(e=e?"&#13;":"\n",Array.isArray(t)){var o,a=[];for(o in t)a.push(t[o]);return a}return(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,e).replace(/[\r\n]/g,e)}}),altEditor.version="2.0",altEditor.defaults={alwaysAsk:!1,focus:null,columns:"",update:null,editor:null},altEditor.classes={btn:"btn"},$(document).on("preInit.dt.altEditor",function(t,e,o){if("dt"===t.namespace){var a=e.oInit.altEditor,n=DataTable.defaults.altEditor;if(a||n){var i=$.extend({},a,n);!1!==a&&new altEditor(e,i)}}}),DataTable.altEditor=altEditor,altEditor});